!function(t){var e={};function i(s){if(e[s])return e[s].exports;var r=e[s]={i:s,l:!1,exports:{}};return t[s].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(s,r,function(e){return t[e]}.bind(null,r));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=1)}([function(t){t.exports={height:24,infinite:!1,layers:[{data:[783,746,829,829,829,744,783,783,783,783,783,783,783,783,783,783,783,783,783,783,783,783,783,783,783,783,746,829,829,829,744,783,819,820,832,750,715,818,819,819,819,819,819,819,819,819,819,819,819,819,819,819,819,819,819,819,819,819,820,832,750,715,818,819,826,715,715,750,715,796,826,715,715,715,715,715,715,715,715,715,715,715,715,715,715,715,715,715,715,826,715,715,750,715,796,826,826,713,713,750,713,713,826,713,713,713,713,713,713,713,713,713,713,713,713,713,713,713,713,713,713,826,713,713,713,713,713,826,826,795,715,750,715,715,826,715,715,715,715,715,715,715,715,715,715,715,715,715,715,715,715,715,715,826,795,715,750,715,715,826,708,709,715,750,833,707,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,709,715,750,833,707,708,783,746,829,829,829,744,783,783,783,783,783,783,783,783,783,783,783,783,783,783,783,783,783,783,783,783,746,715,750,715,744,783,783,746,715,750,715,744,783,783,783,783,783,783,783,783,783,783,783,783,783,783,783,783,783,783,783,783,746,715,750,715,744,783,783,746,715,750,715,744,783,783,783,783,783,783,783,783,783,783,783,783,783,783,783,783,783,783,783,783,746,715,750,715,744,783,783,746,715,750,715,744,783,783,783,783,783,783,783,783,783,783,783,783,783,783,783,783,783,783,783,783,746,715,750,715,744,783,783,746,715,750,715,744,783,783,783,783,783,783,783,783,783,783,783,783,783,783,783,783,783,783,783,783,746,715,750,715,744,783,783,746,715,750,715,744,783,783,783,783,783,783,783,783,783,783,783,783,783,783,783,783,783,783,783,783,746,715,750,715,744,783,783,746,715,750,715,744,783,783,783,783,783,783,783,783,783,783,783,783,783,783,783,783,783,783,783,783,746,715,750,715,744,783,783,746,715,750,715,744,783,783,783,783,783,783,783,783,783,783,783,783,783,783,783,783,783,783,783,783,746,715,750,715,744,783,783,746,715,750,715,744,783,783,783,783,783,783,783,783,783,783,783,783,783,783,783,783,783,783,783,783,746,715,750,715,744,783,783,746,715,750,715,744,783,783,783,783,783,783,783,783,783,783,783,783,783,783,783,783,783,783,783,783,746,715,750,715,744,783,783,746,715,750,715,744,783,783,783,783,783,783,783,783,783,783,783,783,783,783,783,783,783,783,783,783,746,715,750,715,744,783,783,746,829,829,829,744,783,783,783,783,783,783,783,783,783,783,783,783,783,783,783,783,783,783,783,783,746,829,829,829,744,783,819,820,832,750,715,818,819,819,819,819,819,819,819,819,819,819,819,819,819,819,819,819,819,819,819,819,820,832,750,715,818,819,826,715,715,750,715,796,826,715,715,715,715,715,715,715,715,715,715,715,715,715,715,715,715,715,715,826,715,715,750,715,796,826,826,713,713,750,713,713,826,713,713,713,713,713,713,713,713,713,713,713,713,713,713,713,713,713,713,826,713,713,750,713,713,826,826,795,715,750,715,715,826,715,715,715,715,715,715,715,715,715,715,715,715,715,715,715,715,715,715,826,795,715,750,715,715,826,708,709,715,750,833,707,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,709,715,750,833,707,708,783,746,829,829,829,744,783,783,783,783,783,783,783,783,783,783,783,783,783,783,783,783,783,783,783,783,746,829,829,829,744,783],height:24,id:10,name:"ground",opacity:1,type:"tilelayer",visible:!0,width:32,x:0,y:0},{data:[0,0,0,0,0,0,0,402,0,402,0,402,0,402,0,402,0,402,0,402,0,402,0,402,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,439,0,439,0,439,0,439,0,439,0,439,0,439,0,439,0,439,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,402,0,402,0,402,0,402,0,402,0,402,0,402,0,402,0,402,0,402,0,0,0,0,0,0,0,0,0,0,0,0,0,439,0,439,0,439,0,439,0,439,0,439,0,439,0,439,0,439,0,439,0,0,0,0,0,0,0,0,0,0,0,0,0,0,535,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,572,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,609,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,551,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,535,0,0,0,0,0,0,0,634,0,0,0,0,0,0,0,0,554,0,0,0,0,0,0,0,634,0,0,0,0,0,0,572,0,0,0,0,0,0,0,635,0,0,0,0,573,574,0,0,591,0,0,0,0,0,0,0,635,0,0,0,0,0,0,609,0,0,0,0,0,0,0,672,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,672,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],height:24,id:11,name:"streetObjects",opacity:1,type:"tilelayer",visible:!0,width:32,x:0,y:0}],nextlayerid:12,nextobjectid:6,orientation:"orthogonal",renderorder:"right-down",tiledversion:"1.2.0",tileheight:32,tilesets:[{columns:37,firstgid:1,image:"roguelikeCity_transparent.png",imageheight:950,imagewidth:1256,margin:0,name:"roguelikeCity_transparent",spacing:2,tilecount:1036,tileheight:32,tilewidth:32}],tilewidth:32,type:"map",version:1.2,width:32}},function(t,e,i){"use strict";i.r(e);class s{constructor(){this.oldState={},this.newState={},window.addEventListener("keydown",t=>{"ArrowLeft"!==t.key&&"ArrowRight"!==t.key&&"ArrowUp"!==t.key&&"ArrowDown"!==t.key||(t.preventDefault(),this.newState[t.key]=!0)}),window.addEventListener("keyup",t=>{"ArrowLeft"!==t.key&&"ArrowRight"!==t.key&&"ArrowUp"!==t.key&&"ArrowDown"!==t.key||(t.preventDefault(),this.newState[t.key]=!1)})}update(){this.oldState=JSON.parse(JSON.stringify(this.newState))}keyPressed(t){return this.newState[t]}keyDown(t){return this.newState[t]&&!this.oldState[t]}keyUp(t){return!this.newState[t]&&this.oldState[t]}}var r=new class{constructor(t,e){this._start=null,this.WIDTH=t,this.HEIGHT=e,this.input=new s,this.entities=[],this.data=i(0),this.tileset=document.createElement("img"),this.tileset.src=this.data.tilesets[0].image,this.backBuffer=document.createElement("canvas"),this.backBuffer.width=this.WIDTH,this.backBuffer.height=this.HEIGHT,this.backBufferCtx=this.backBuffer.getContext("2d"),this.screenBuffer=document.createElement("canvas"),this.screenBuffer.width=this.WIDTH,this.screenBuffer.height=this.HEIGHT,this.screenBufferCtx=this.screenBuffer.getContext("2d"),document.body.append(this.screenBuffer)}addEntity(t){this.entities.push(t)}update(t){this.entities.forEach(e=>e.update(t,this.input)),this.input.update()}render(t){this.backBufferCtx.fillStyle="white",this.backBufferCtx.fillRect(0,0,this.WIDTH,this.HEIGHT),this.entities.forEach(e=>e.render(t,this.backBufferCtx)),this.screenBufferCtx.drawImage(this.backBuffer,0,0)}loop(t){var e=this._frame_start?t-this._frame_start:0;this.update(e),this.render(e),this._frame_start=t,window.requestAnimationFrame(t=>{this.loop(t)})}}(1024,768);r.addEntity(new class{constructor(t,e){this.tilemap=e,this.tileset=t}update(t,e){}render(t,e){let i=this.tilemap.layers;for(let t=0;t<i.length;t++){let i=this.tilemap.layers[t].data,s=0,r=0,h=0,n=0;for(let t=0;t<i.length;t++)0!==i[t]&&(s=t%32*32,r=32*Math.floor(t/32),h=(i[t]-1)%37*34,n=34*Math.floor((i[t]-1)/37),e.drawImage(this.tileset,h,n,32,32,s,r,32,32),s++)}}}(r.tileset,r.data)),r.addEntity(new class{constructor(t,e,i){this.x=t,this.y=e,this.tileset=i,this.Directions={LEFT:0,RIGHT:1,UP:2,DOWN:3},this.direction=this.Directions.RIGHT}update(t,e){e.keyPressed("ArrowLeft")?(this.direction=this.Directions.LEFT,this.x-=2):e.keyPressed("ArrowRight")?(this.direction=this.Directions.RIGHT,this.x+=2):e.keyPressed("ArrowUp")?(this.direction=this.Directions.UP,this.y-=2):e.keyPressed("ArrowDown")&&(this.direction=this.Directions.DOWN,this.y+=2)}render(t,e){this.direction===this.Directions.LEFT&&(e.drawImage(this.tileset,1054,544,32,32,this.x-48,this.y,32,32),e.drawImage(this.tileset,1088,544,32,32,this.x-16,this.y,32,32),e.drawImage(this.tileset,1122,544,32,32,this.x+16,this.y,32,32),e.drawImage(this.tileset,1054,578,32,32,this.x-48,this.y+32,32,32),e.drawImage(this.tileset,1088,578,32,32,this.x-16,this.y+32,32,32),e.drawImage(this.tileset,1122,578,32,32,this.x+16,this.y+32,32,32)),this.direction===this.Directions.RIGHT&&(e.drawImage(this.tileset,1156,544,32,32,this.x-48,this.y,32,32),e.drawImage(this.tileset,1190,544,32,32,this.x-16,this.y,32,32),e.drawImage(this.tileset,1224,544,32,32,this.x+16,this.y,32,32),e.drawImage(this.tileset,1156,578,32,32,this.x-48,this.y+32,32,32),e.drawImage(this.tileset,1190,578,32,32,this.x-16,this.y+32,32,32),e.drawImage(this.tileset,1224,578,32,32,this.x+16,this.y+32,32,32)),this.direction===this.Directions.UP&&(e.drawImage(this.tileset,1054,612,32,32,this.x-32,this.y,32,32),e.drawImage(this.tileset,1088,612,32,32,this.x,this.y,32,32),e.drawImage(this.tileset,1054,646,32,32,this.x-32,this.y+32,32,32),e.drawImage(this.tileset,1088,646,32,32,this.x,this.y+32,32,32)),this.direction===this.Directions.DOWN&&(e.drawImage(this.tileset,1122,612,32,32,this.x-32,this.y,32,32),e.drawImage(this.tileset,1156,612,32,32,this.x,this.y,32,32),e.drawImage(this.tileset,1122,646,32,32,this.x-32,this.y+32,32,32),e.drawImage(this.tileset,1156,646,32,32,this.x,this.y+32,32,32))}}(60,60,r.tileset)),r.loop()}]);